<!DOCTYPE html>
<html lang="en">
<head>
  <link rel="icon" type="image/png" href="favicon.png">
  <!-- Google tag (gtag.js) -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-L6C1HZ2LBZ"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'G-L6C1HZ2LBZ');
  </script>
  <meta charset="UTF-8">
  <link rel="stylesheet" href="css/styles.css">

  <style>
    html { 
      font-size: 150%; 
    }
    body {
      color: #222222;
    }
  </style>

  <title>Find Your Ideal Climate</title>
  <style>
    body {background:url('https://upload.wikimedia.org/wikipedia/commons/thumb/1/19/Departure_%2833950426345%29.jpg/2560px-Departure_%2833950426345%29.jpg') no-repeat center center;
    background-size: cover;
    min-height: 110vh;
    font-family: Arial, sans-serif; }
    #climate-box, #recommendation { max-width: 400px; margin: 50px auto; padding: 20px; background: #eeeeee; border-radius: 8px; box-shadow: 0 2px 8px rgba(0,0,0,0.1); }
    #climate-box h2, #recommendation h2 { text-align: center; margin-bottom: 20px; }
    .climate-input { margin-bottom: 15px; }
    .climate-input label { display: block; margin-bottom: 5px; font-size: 0.9rem; }
    .climate-input input { width: 100%; padding: 8px; box-sizing: border-box; font-size: 1rem; }
    button.unit-btn {
      margin: 5px 2px; padding: 8px 12px; font-size: 0.9rem;
      border: 2px solid black; border-radius: 999px;
      background: #eeeeee; color: #222222; cursor: pointer;
    }
    button.unit-btn:disabled {
      background: #007BFF; color: #eeeeee; cursor: default;
    }
    #submitBtn {
      width: 100%; padding: 10px; font-size: 1rem;
      background: #007BFF; color: #eeeeee; border: none;
      border-radius: 5px; cursor: pointer;
    }
    #submitBtn:hover { background: #0056b3; }
    #result { margin-top: 20px; padding: 10px; background: #dddddd; border-radius: 5px; font-weight: bold; text-align: center; }
    #recommendation { display: none; text-align: center; }
    #recommendation img { max-width: 100%; border-radius: 5px; margin-bottom: 15px; }
    #recommendation p { font-size: 1rem; }
  </style>
</head>
<body>

	<!-- HEADER / FAVICON BANNER -->
  <div id="header">
    <p>The Dickinson Climate Classification</p>
  </div>

  <!-- NAVIGATION BAR -->
  <nav>
    <a href="home.html">Home</a>
    <a href="classification.html">Classification</a>
    <a href="maps.html">Maps</a>
    <a href="graphs.html">Graphs</a>
    <a href="about.html">About</a>
  </nav>
  
  <div id="climate-box">
    <h2>Find Your Ideal Climate</h2>
    <div>
      <button id="toCelsiusBtn" class="unit-btn">To °C</button>
      <button id="toFahrenheitBtn" class="unit-btn" disabled>To °F</button>
    </div>
    <div class="climate-input">
      <label for="hotHigh">Hottest Month – Avg Daytime <strong>High</strong> (<span class="unit">°F</span>):</label>
      <input type="number" id="hotHigh" placeholder="Example: 69">
    </div>
    <div class="climate-input">
      <label for="hotLow">Hottest Month – Avg Nighttime <strong>Low</strong> (<span class="unit">°F</span>):</label>
      <input type="number" id="hotLow" placeholder="Example: 58">
    </div>
    <div class="climate-input">
      <label for="coldHigh">Coldest Month – Avg Daytime <strong>High</strong> (<span class="unit">°F</span>):</label>
      <input type="number" id="coldHigh" placeholder="Example: 59">
    </div>
    <div class="climate-input">
      <label for="coldLow">Coldest Month – Avg Nighttime <strong>Low</strong> (<span class="unit">°F</span>):</label>
      <input type="number" id="coldLow" placeholder="Example: 49">
    </div>
    <button id="submitBtn">Submit</button>
    <div id="result"></div>
  </div>

  <div id="recommendation">
    <h2 id="climateType"></h2>
    <img id="climateImage" src="" alt="Climate illustration">
    <p>Consider moving to: <span id="cityList"></span></p>
  </div>

 <script>
  let currentUnit = 'F';
  const unitSpans = document.querySelectorAll('.unit');
  const inputs = ['coldLow','coldHigh','hotLow','hotHigh'];
  const defaultPlaceholders = { coldLow: 49, coldHigh: 59, hotLow: 58, hotHigh: 69 };

  function updateUnitLabels() {
    unitSpans.forEach(span => span.textContent = currentUnit === 'F' ? '°F' : '°C');
  }

  function updatePlaceholders(toUnit) {
    inputs.forEach(id => {
      const el = document.getElementById(id);
      const def = defaultPlaceholders[id];
      const ph = toUnit === 'C'
        ? Math.round((def - 32) * 5/9)
        : def;
      el.placeholder = `Example: ${ph}`;
    });
  }

  function convertValues(toUnit) {
    inputs.forEach(id => {
      const el = document.getElementById(id);
      const val = parseFloat(el.value);
      if (!isNaN(val)) {
        const converted = toUnit === 'C'
          ? (val - 32) * 5/9
          : (val * 9/5) + 32;
        el.value = Math.round(converted);
      }
    });
  }

  document.getElementById('toCelsiusBtn').addEventListener('click', () => {
    if (currentUnit === 'F') {
      convertValues('C');
      currentUnit = 'C';
      updateUnitLabels();
      updatePlaceholders('C');
      document.getElementById('toCelsiusBtn').disabled = true;
      document.getElementById('toFahrenheitBtn').disabled = false;
    }
  });

  document.getElementById('toFahrenheitBtn').addEventListener('click', () => {
    if (currentUnit === 'C') {
      convertValues('F');
      currentUnit = 'F';
      updateUnitLabels();
      updatePlaceholders('F');
      document.getElementById('toCelsiusBtn').disabled = false;
      document.getElementById('toFahrenheitBtn').disabled = true;
    }
  });

  document.getElementById('submitBtn').addEventListener('click', () => {
    const hotLow   = parseFloat(document.getElementById('hotLow').value);
    const hotHigh  = parseFloat(document.getElementById('hotHigh').value);
    const coldLow  = parseFloat(document.getElementById('coldLow').value);
    const coldHigh = parseFloat(document.getElementById('coldHigh').value);
    const resultDiv = document.getElementById('result');

    if ([hotLow, hotHigh, coldLow, coldHigh].some(v => isNaN(v))) {
      resultDiv.textContent = 'Please fill in all four fields with valid numbers.';
      resultDiv.style.color = 'red';
      return;
    }
    
    // range & sanity checks
    const minTemp = currentUnit === 'F' ? -112 : -80;
    const maxTemp = currentUnit === 'F' ?  176 :  80;
    const maxDiff = currentUnit === 'F' ?   36 :  20;

    // 1) out-of-bounds
    if ([hotLow, hotHigh, coldLow, coldHigh].some(v => v < minTemp || v > maxTemp)) {
      resultDiv.textContent = 
        `Error: Temps must be between ${minTemp} and ${maxTemp} ${currentUnit}.`;
      resultDiv.style.color = 'red';
      return;
    }

    // 2) day/night swing too large
    if (Math.abs(hotHigh - hotLow) > maxDiff
     || Math.abs(coldHigh - coldLow) > maxDiff) {
      resultDiv.textContent =
        `Error: Day–night difference cannot exceed ${maxDiff} ${currentUnit}.`;
      resultDiv.style.color = 'red';
      return;
    }

    // 3) hottest-month avg colder than coldest-month avg
    const summerAvgRaw = (hotLow + hotHigh) / 2;
    const winterAvgRaw = (coldLow + coldHigh) / 2;
    if (summerAvgRaw < winterAvgRaw) {
      resultDiv.textContent =
        'Error: Hottest-month average cannot be colder than coldest-month average.';
      resultDiv.style.color = 'red';
      return;
    }

    // 4) high must be ≥ low for each month
    if (hotHigh < hotLow || coldHigh < coldLow) {
      resultDiv.textContent =
        'Error: For each month, the average daytime high must be equal to or higher than the average nighttime low.';
      resultDiv.style.color = 'red';
      return;
    }

    // Convert to Celsius for classification
    const summerAvgC = currentUnit === 'F'
      ? (summerAvgRaw - 32) * 5/9
      : summerAvgRaw;
    const winterAvgC = currentUnit === 'F'
      ? (winterAvgRaw - 32) * 5/9
      : winterAvgRaw;

    let climateVar, summerVar;

    if      (winterAvgC >= 50) climateVar = 'H';
    else if (winterAvgC >= 40) climateVar = 'X';
    else if (winterAvgC >= 30) climateVar = 'Z';
    else if (winterAvgC >= 20) climateVar = 'A';
    else if (winterAvgC >= 10) climateVar = 'B';
    else if (winterAvgC >= 0) climateVar = 'C';
    else if (winterAvgC >= -10) climateVar = 'D';
    else if (winterAvgC >= -20) climateVar = 'E';
    else if (winterAvgC >= -30) climateVar = 'F';
    else if (winterAvgC >= -40) climateVar = 'G';
    else                       climateVar = 'Y';

    if      (summerAvgC >= 50) summerVar = 'H';
    else if (summerAvgC >= 40) summerVar = 'X';
    else if (summerAvgC >= 35) summerVar = 'Z2';
    else if (summerAvgC >= 30) summerVar = 'Z1';
    else if (summerAvgC >= 25) summerVar = 'A2';
    else if (summerAvgC >= 20) summerVar = 'A1';
    else if (summerAvgC >= 15) summerVar = 'B2';
    else if (summerAvgC >= 10) summerVar = 'B1';
    else if (summerAvgC >= 5) summerVar = 'C2';
    else if (summerAvgC >= 0) summerVar = 'C1';
    else                      summerVar = 'Y';

    // build a URL like "climate.html?code=AZ2"
      // redirect:
    window.location.href = `climate.html?code=${climateVar}${summerVar}`;
  });
</script>

</body>
</html>
