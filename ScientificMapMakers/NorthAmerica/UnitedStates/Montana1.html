<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Climate Legend</title>

  <style>
    body {
      background-color: #000;
      color: #fff;
    }

    .legend {
      position: fixed; top: 20px; right: 20px; z-index: 9999;
      display: grid;
      grid-template-columns: repeat(6, 1fr);
      gap: 16px 28px; padding: 24px;
      background: #fff;
      border: 2px solid #ccc; border-radius: 16px;
      font-family: system-ui, Arial, sans-serif; color: #222;
      box-shadow: 0 8px 28px rgba(0,0,0,.08);
      max-width: min(96vw, 1600px);
    }

    .legend-item {
      display: flex; align-items: center; gap: 20px;
      min-width: 0;
    }

    .legend-swatch {
      width: 72px; height: 36px; border: 2px solid #333; border-radius: 6px;
      box-sizing: border-box;
      flex: 0 0 auto;
    }

    .legend-label {
      display: block;
      white-space: nowrap; overflow: hidden;
      text-overflow: clip;
      flex: 1 1 auto; min-width: 0;
      line-height: 1.2;
    }

    /* Invisible placeholder cell (keeps grid alignment) */
    .legend-blank {
      width: 100%;
      height: 36px;
      visibility: hidden;
    }

    /* Thicker horizontal black divider (spans full grid width) */
    .legend-divider {
      grid-column: span 6;
      height: 6px;
      background-color: #000;
      border-radius: 3px;
      margin: 8px 0;
    }
  </style>
</head>

<body>
  <script>
    // example of code for blank cell space or spaces
    // 5 blank cell spaces in the following example
    // { blank: true, span: 5 },
    //
    // code for dividing line
    // { divider: true },
    // ---------- CONFIG ----------
    const LEGEND_ITEMS = [ 

      { label: "Ec2",               color: "#ffffff" },
      { blank: true, span: 5 },
      
      { label: "Eb1",               color: "#0000ff" },
      { blank: true, span: 5 },
      
      { label: "Ehb2",              color: "#008888" },
      { label: "Egb2",              color: "#00ffff" },
      { label: "Esb2",              color: "#444444" },
      { label: "Edb2",              color: "#cc0044" },
      { label: "Ewb2",              color: "#660066" },
      
      { blank: true, span: 3 },
      { label: "Esa1",              color: "#888888" },
      { blank: true, span: 1 },
      { label: "Ewa1",              color: "#bb00bb" },
      
      { divider: true },
      
      { label: "Db1",               color: "#6666ff" },
      { blank: true, span: 5 },
      
      { label: "Dhb2",              color: "#004400" },
      { label: "Dgb2",              color: "#88ff88" },
      { label: "Dsb2",              color: "#ccaa88" },
      { label: "Ddb2",              color: "#ff0066" },
      { label: "Dwb2",              color: "#ff00ff" },
      { label: "Dmb2",              color: "#aaaa00" },
      
      { label: "Dha1",              color: "#008800" },
      { label: "Dga1",              color: "#00ff00" },
      { label: "Dsa1",              color: "#aa8866" },
      { label: "Dda1",              color: "#dd2200" },
      { blank: true, span: 1 },
      { label: "Dma1",              color: "#dddd00" },
      
    ];

    // ---------- RENDER ----------
    const legend = document.createElement('div');
    legend.className = 'legend';
    document.body.appendChild(legend);

    LEGEND_ITEMS.forEach(({ label, color, blank, span, divider }) => {
      if (divider) {
        const line = document.createElement('div');
        line.className = 'legend-divider';
        legend.appendChild(line);
        return;
      }

      if (blank) {
        const count = span || 1;
        for (let i = 0; i < count; i++) {
          const spacer = document.createElement('div');
          spacer.className = 'legend-blank';
          legend.appendChild(spacer);
        }
        return;
      }

      const item = document.createElement('div');
      item.className = 'legend-item';

      const swatch = document.createElement('div');
      swatch.className = 'legend-swatch';
      swatch.style.background = color;

      const text = document.createElement('span');
      text.className = 'legend-label';
      text.textContent = label;

      item.appendChild(swatch);
      item.appendChild(text);
      legend.appendChild(item);
    });

    // ---------- FIT LONG LABELS (auto-shrink) ----------
    (function fitLabels() {
      const MAX = 28, MIN = 16, STEP = 1;
      const labels = Array.from(document.querySelectorAll('.legend-label'));
      labels.forEach(el => {
        let size = MAX;
        el.style.fontSize = `${size}px`;
        while (size > MIN && el.scrollWidth > el.clientWidth) {
          size -= STEP;
          el.style.fontSize = `${size}px`;
        }
      });
    })();
  </script>
</body>
</html>
