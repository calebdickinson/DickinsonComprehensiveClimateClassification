<!DOCTYPE html>
<html lang="en">
<head>
  <link rel="icon" type="image/png" href="favicon.png">
  <!-- Google tag (gtag.js) -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-L6C1HZ2LBZ"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'G-L6C1HZ2LBZ');
  </script>
  <meta charset="UTF-8">
  <title>"Graphs"</title>
  <link rel="stylesheet" href="css/styles.css">
  <style> 
    #map {
				aspect-ratio: 3 / 2;
        margin: 0 auto 25px;
				width: min(90vw, 1280px);
				height: min(50vh);
    }

    .year-row {
        text-align: center;
        margin: 15px 0;
    }

    .year-btn {
        width: 12rem;
        height: 2.5rem;
        font-size: 1.1rem;
        border-radius: 999px;
        border: none;
        cursor: pointer;
        margin: 0 6px;
    }

    .year-btn:hover {
        transform: scale(1.08);
    }

    .year-btn.active {
        border: 3px solid black;
    }

    .graph-block > div {
        display: none;
    }

    .graph-block img {
        max-height: 80vh;
        width: auto;
        height: auto;
        display: block;
        margin: 0 auto;
    }

    @media (max-width: 1400px) {
      .year-row {
        display: grid;
        grid-template-columns: repeat(2, auto);
        justify-content: center;
        gap: 30px;
      }
    }
  </style>
  <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css"/>
  <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
  <script>
    let currentStation = "ConcordiaStation";

    function showGraph(n) {
    for (let i = 1; i <= 4; i++) {
        const g = document.getElementById('graph' + i);
        if (g) g.style.display = 'none';

        const btn = document.getElementById('graphbtn' + i);
        if (btn) btn.classList.toggle('active', i === n);
    }

    const chosen = document.getElementById('graph' + n);
    if (chosen) chosen.style.display = 'block';
    }

    function setLocation(name) {
    currentLocation = name;

    // swap all four images
    document.querySelector("#graph1 img").src = `graphs/${name}1-F.png`;
    document.querySelector("#graph2 img").src = `graphs/${name}2-F.png`;
    document.querySelector("#graph3 img").src = `graphs/${name}3-F.png`;
    document.querySelector("#graph4 img").src = `graphs/${name}4-F.png`;

    showGraph(1); // reset to first period
    }

    window.addEventListener('DOMContentLoaded', () => {
    showGraph(1);
    });
  </script>
  <script>
    window.addEventListener('DOMContentLoaded', function () {
			// create map AFTER element exists
			var map = L.map('map', {
				worldCopyJump: false,
				maxBoundsViscosity: 1.0
			});

			map.setView([39, -98], 4);
			setTimeout(() => map.invalidateSize(), 0);

			// satellite
			L.tileLayer(
				'https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}',
				{
					detectRetina: true
				}
			).addTo(map);

			// labels overlay
			L.tileLayer(
				'https://services.arcgisonline.com/ArcGIS/rest/services/Reference/World_Boundaries_and_Places/MapServer/tile/{z}/{y}/{x}',
				{
					detectRetina: true
				}
			).addTo(map);

			// locations
			var locations = [
        {name: "Banff",                  lat: 51.1784,  lon: -115.5708},
        {name: "Bogotá",                 lat: 4.7110,   lon: -74.0721},
        {name: "CaseyStation",           lat: -66.2818, lon: 110.5286},
				{name: "ConcordiaStation",       lat: -75.0990, lon: 123.3320},
        {name: "Forks",                  lat: 47.9500,  lon: -124.3850},
        {name: "HeardIsland",            lat: -53.0333, lon: 73.4000},
        {name: "LaPaz",                  lat: -16.4897, lon: -68.1193},
				{name: "LosAngeles",             lat: 34.0522,  lon: -118.2437},
        {name: "MacquarieIslandStation", lat: -54.6200, lon: 158.8500},
        {name: "MawsonStation",          lat: -67.6027, lon: 62.8738},
				{name: "NewYorkCity",            lat: 40.7128,  lon: -74.0060},
        {name: "Oymyakon",               lat: 63.4641,  lon: 142.7737},
        {name: "Quito",                  lat: -0.2200,  lon: -78.5125},
        {name: "SveaStation",            lat: -74.5833, lon: -11.2167},
        {name: "Tórshavn",               lat: 62.0079,  lon: -6.7900},
        {name: "Verkhoyansk",            lat: 67.5506,  lon: 133.3900},
			];

			locations.forEach(function(s) {
				L.marker([s.lat, s.lon]).addTo(map)
				.on('click', function () {
					setLocation(s.name);
				});
			});
    });
  </script>
</head>
<body>
  <div id="header">
    <p class="center">The Dickinson Climate Classification</p>
  </div>
  <nav>
    <a href="home.html">Home</a>
    <a href="classification.html">Classification</a>
    <a href="maps.html">Maps</a>
    <a href="graphs.html">Graphs</a>
    <a href="about.html">About</a>
  </nav>
  <main>
    <div id="map"></div>

    <div class="year-row" style="text-align:center; margin:30px 0;">
      <button id="graphbtn1" class="year-btn" onclick="showGraph(1)">1981 - 2010</button>
      <button id="graphbtn2" class="year-btn" onclick="showGraph(2)">2011 - 2040</button>
      <button id="graphbtn3" class="year-btn" onclick="showGraph(3)">2041 - 2070</button>
      <button id="graphbtn4" class="year-btn" onclick="showGraph(4)">2071 - 2100</button>
    </div>

    <div class="graph-block">
      <div id="graph1"><img src="graphs/LosAngeles1-F.png"></div>
      <div id="graph2"><img src="graphs/LosAngeles2-F.png"></div>
      <div id="graph3"><img src="graphs/LosAngeles3-F.png"></div>
      <div id="graph4"><img src="graphs/LosAngeles4-F.png"></div>
    </div><br>

    <p>Email me at calebisaacdickinson@gmail.com to get any location added to this page.</p><br>
    <p>Map marker coordinates are identical to the coordinates used in the climate graph calculations.</p><br>

    <br><br><br>
  </main>
</body>
</html>
